# 目前已经可以完成AlexNet等绝大多数卷积网络的训练，后续工作：
##  决定要不要采用DNNL库改写
   SGX的DNNL库类似CUDA，提供了针对Intel CPU 和 GPU的**底层优化**，但是它的实现比较复杂，我的设计并未涉及C++类之类的操作，**只用了C写**。具体哪种实现方式更快尚不清楚。
 ##  加密体系的设计

   目前的想法是客户端也需要有Enclave，利用Enclave的Data Seal功能封装数据，离线发送到服务端。或者是远程认证在线提供服务。

   如果客户端没有Enclave，暂时还没想到**如何不经过操作系统直接将Key传入Enclave**。
## GPU开发

   想法是数据传入到Enclave解密后，生成**随机噪声**加到数据上，再传到GPU里计算（来自文章GELU-Net）。
 ## 分布式Enclave

 ## 测试

   由于在模拟器模式下测试不准确，**需要一台支持SGX的机器进行后续测试**。

# 模拟器模式下的测试(MNIST)

**Batch Size: 512**

| Condition               | Time   | Space            |
| ----------------------- | ------ | ---------------- |
| without enclave         | 0.772s | /                |
| enclave without cipher  | 0.650s | 58096KB≈56.734MB |
| enclave with rc4 cipher | 1.462s | 29088KB≈28.40MB  |

*在不加密的情况下，使用enclave耗时比未使用enclave耗时短的原因（猜测）*

+ 在模拟模式下，模拟器可能只是做了简单的地址映射，未做真正的内存拷贝。
+ 代码有细微差距，enclave外的代码在函数调用时传递的是整个结构体，可能更加耗时。

